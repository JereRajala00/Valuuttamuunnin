<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>About Us</title>
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.2.0/dist/leaflet.css" />
    <link rel="stylesheet" href="https://unpkg.com/leaflet-routing-machine@latest/dist/leaflet-routing-machine.css" />
    <script src="https://unpkg.com/leaflet@1.2.0/dist/leaflet.js"></script>
    <script src="https://unpkg.com/leaflet-routing-machine@latest/dist/leaflet-routing-machine.js"></script>
    <style>
        .map {
            position: absolute;
            width: 50%;
            height: 50%;
        }
    </style>
</head>
<body>
<h1>Näin pääset Metropolian Karamalmin toimipisteelle:</h1>
<div id="map" class="map">
<script>
  const options = {
    enableHighAccuracy: true,
    timeout: 5000,
    maximumAge: 0
  };
  function openMap(pos) {

    const crd = pos.coords;
    var map = L.map('map');

    // Tulostetaan paikkatiedot konsoliin
    console.log('Your current position is:');
    console.log(`Latitude : ${crd.latitude}`);
    console.log(`Longitude: ${crd.longitude}`);
    console.log(`More or less ${crd.accuracy} meters.`);

    L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
        attribution: '© OpenStreetMap contributors'
    }).addTo(map);

    L.Routing.control({
        waypoints: [
        L.latLng(crd.latitude, crd.longitude),
        L.latLng(60.223890, 24.758295)
        ],
        routeWhileDragging: true,
        router: L.Routing.mapbox('pk.eyJ1IjoidGFhYW5rIiwiYSI6ImNrZm55bHV5MjJxbGEyeW8zd2kyamNucWcifQ.ZjrFICw6y2JIeQjNGQeraA'),
        geocoder: L.Control.Geocoder.nominatim()
    }).addTo(map);
  }
  function error(err) {
    console.warn(`ERROR(${err.code}): ${err.message}`);
  }

  navigator.geolocation.getCurrentPosition(openMap, error, options);
</script>
</div>
</body>
</html>